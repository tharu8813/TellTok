이 문제는 **양방향 관계**를 만족하는 친구 리스트를 생성하는 것입니다. 즉, 친구 A가 친구 B를 친구 목록에 가지고 있다면, 친구 B도 친구 A를 친구 목록에 가져야 합니다. 이를 만족하면서도 친구 목록의 길이가 랜덤하게 되도록 구현하겠습니다.

### 요구사항
- 학급 번호: `1번`부터 `N번`까지의 학급 번호.
- 최대 친구 리스트 수: 각 학생의 친구 목록의 최대 길이.
- 평균 친구 리스트 수: 전체 친구 목록의 평균 길이를 목표로 랜덤하게 생성.

### 해결 방안
1. 초기화: 모든 학생의 친구 리스트를 빈 리스트로 초기화합니다.
2. 친구 추가: 학생의 친구 목록에 랜덤하게 친구를 추가합니다.
3. 양방향 추가: 친구를 추가할 때, 반대쪽 학생의 리스트에도 추가합니다.
4. 조건 확인: 최대 친구 수와 평균 친구 수를 만족하도록 합니다.

이제 C# 코드를 작성해보겠습니다.

```csharp
using System;
using System.Collections.Generic;

class Program
{
    static void Main()
    {
        var result = GenerateFriendLists(20, 10, 5);
        
        // 결과 출력
        for (int i = 0; i < result.Length; i++)
        {
            Console.Write($"[{i + 1}]: ");
            Console.WriteLine(string.Join(", ", result[i]));
        }
    }

    static List<int>[] GenerateFriendLists(int totalStudents, int maxFriends, int avgFriends)
    {
        var random = new Random();
        var friendLists = new List<int>[totalStudents];
        
        // 초기화
        for (int i = 0; i < totalStudents; i++)
        {
            friendLists[i] = new List<int>();
        }

        // 친구 관계 추가
        for (int i = 0; i < totalStudents; i++)
        {
            int friendCount = random.Next(1, Math.Min(maxFriends, avgFriends * 2));
            
            while (friendLists[i].Count < friendCount)
            {
                int friend = random.Next(0, totalStudents);
                
                // 자기 자신이거나 이미 추가된 친구는 건너뜀
                if (friend == i || friendLists[i].Contains(friend))
                    continue;

                // 양방향 친구 관계 추가
                friendLists[i].Add(friend);
                friendLists[friend].Add(i);
            }
        }

        return friendLists;
    }
}
```

### 코드 설명
1. **`GenerateFriendLists` 메서드**: 학급 번호, 최대 친구 수, 평균 친구 수를 입력받아 각 학생의 친구 목록을 생성합니다.
2. **양방향 관계 추가**: `friendLists[i]`에 친구 번호를 추가할 때, 상대방 리스트에도 추가합니다.
3. **결과 출력**: 학급 번호와 친구 리스트를 출력합니다.

### 출력 예시
```plaintext
[1]: 4, 7, 10, 12
[2]: 3, 5, 11
[3]: 2, 9, 13
[4]: 1, 6
[5]: 2, 8
...
```

이 코드는 학생 수와 친구 목록 수를 조절하면서 다양한 친구 관계를 생성할 수 있습니다.